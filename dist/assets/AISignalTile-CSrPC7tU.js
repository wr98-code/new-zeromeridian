import{j as n}from"./vendor-radix-C8Wf2Xzy.js";import{r as a}from"./vendor-icons-BDtiwxs7.js";import{G as A}from"./GlassCard-FdfA-xA0.js";import{a as O}from"./index-BrbV88om.js";import{m as j}from"./vendor-motion-BuE0cxIe.js";import"./vendor-utils-CyvyRcDv.js";import"./vendor-query-BhSX34xp.js";import"./vendor-react-DOP_lrST.js";const R=50,w=14,B=20,k=2,z=Object.freeze({anomalyLevel:"NONE",anomalyScore:0,volatilityScore:0,trendStrength:0,signalConfidence:0,prediction:"SIDEWAYS",features:{rsi:50,macdSignal:0,bollingerPos:.5,volumeAnomaly:0},tfReady:!1,backend:"js"});function L(t,o){if(t.length<o+1)return 50;let e=0,r=0;for(let l=t.length-o;l<t.length;l++){const c=t[l]-t[l-1];c>0?e+=c:r-=c}const s=e/o,g=r/o;return g===0?100:100-100/(1+s/g)}function E(t,o){if(t.length<o)return t[t.length-1]??0;const e=2/(o+1);let r=t[0];for(let s=1;s<t.length;s++)r=t[s]*e+r*(1-e);return r}function N(t,o,e){if(t.length<o)return .5;const r=t.slice(-o),s=r.reduce((f,d)=>f+d,0)/o,g=r.reduce((f,d)=>f+(d-s)**2,0)/o,i=Math.sqrt(g);if(i===0)return .5;const l=s+e*i,c=s-e*i,p=t[t.length-1];return Math.max(0,Math.min(1,(p-c)/(l-c)))}function D(t,o){if(t.length<2)return 0;const e=t.slice(-20),r=[];for(let i=1;i<e.length;i++)e[i-1]!==0&&r.push((e[i]-e[i-1])/e[i-1]);if(r.length===0)return 0;const s=r.reduce((i,l)=>i+l,0)/r.length,g=r.reduce((i,l)=>i+(l-s)**2,0)/r.length;return Math.min(1,Math.sqrt(g)*100)}function T(t){if(t.length<5)return 0;const o=t.slice(-20),e=o.reduce((s,g)=>s+g,0)/o.length,r=t[t.length-1];return e===0?0:Math.min(1,Math.abs(r/e-1))}function P(t){const o=t.map(y=>y.price),e=t.map(y=>y.volume),r=t.map(y=>y.change),s=L(o,w),g=E(o,12),i=E(o,26),l=(g-i)/(o[o.length-1]||1),c=N(o,B,k),p=T(e),f=D(o),d=r.slice(-5),u=d.length>0?d.reduce((y,F)=>y+F,0)/d.length:0,S=Math.max(-1,Math.min(1,u/10)),b=s>80||s<20?(Math.abs(s-50)-30)/20:0,x=Math.min(1,f*.4+p*.4+b*.2);let m="NONE";x>.8?m="EXTREME":x>.6?m="HIGH":x>.4?m="MEDIUM":x>.2&&(m="LOW");let h="SIDEWAYS";const M=(s>50?1:0)+(l>0?1:0)+(c>.5?1:0)+(S>0?1:0);M>=3?h="PUMP":M<=1&&(h="DUMP");const C=Math.abs(M-2)/2;return{anomalyLevel:m,anomalyScore:x,volatilityScore:f,trendStrength:S,signalConfidence:C,prediction:h,features:{rsi:s,macdSignal:l,bollingerPos:c,volumeAnomaly:p}}}function W(){const t=a.useRef(!0),o=a.useRef([]),e=a.useRef("js"),r=a.useRef(!1),[s,g]=a.useState({...z}),[i,l]=a.useState(!1);a.useEffect(()=>{t.current=!0;const p=new AbortController;async function f(){try{const d=document.createElement("script");d.src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.22.0/dist/tf.min.js",d.async=!0,d.crossOrigin="anonymous",d.onload=()=>{if(!t.current)return;const u=window.tf;u&&typeof u.getBackend=="function"&&(e.current=String(u.getBackend())),r.current=!0,t.current&&l(!0)},d.onerror=()=>{r.current=!1,t.current&&l(!0)},document.head.appendChild(d)}catch(d){if(d?.name==="AbortError")return;t.current&&l(!0)}}return f(),()=>{t.current=!1,p.abort()}},[]);const c=a.useCallback(p=>{if(!t.current||(o.current.push(p),o.current.length>R&&(o.current=o.current.slice(-R)),o.current.length<10))return;const f=P(o.current);g({...f,tfReady:r.current,backend:e.current})},[]);return a.useMemo(()=>({result:s,push:c,isReady:i}),[s,c,i])}const G=Object.freeze({NONE:{color:"rgba(148,163,184,0.5)",bg:"rgba(148,163,184,0.06)",label:"◆ NONE"},LOW:{color:"rgba(52,211,153,0.8)",bg:"rgba(52,211,153,0.08)",label:"▲ LOW"},MEDIUM:{color:"rgba(251,191,36,1)",bg:"rgba(251,191,36,0.08)",label:"◈ MEDIUM"},HIGH:{color:"rgba(251,113,133,1)",bg:"rgba(251,113,133,0.08)",label:"⚠ HIGH"},EXTREME:{color:"rgba(239,68,68,1)",bg:"rgba(239,68,68,0.12)",label:"⚡ EXTREME"}}),U=Object.freeze({PUMP:{color:"rgba(52,211,153,1)",bg:"rgba(52,211,153,0.10)",label:"▲ PUMP",icon:"↑"},DUMP:{color:"rgba(251,113,133,1)",bg:"rgba(251,113,133,0.10)",label:"▼ DUMP",icon:"↓"},SIDEWAYS:{color:"rgba(96,165,250,0.7)",bg:"rgba(96,165,250,0.06)",label:"◆ SIDEWAYS",icon:"→"}}),_=Object.freeze({display:"flex",flexDirection:"column",gap:"8px"}),Y=Object.freeze({padding:"16px",height:"100%",display:"flex",flexDirection:"column",gap:"12px"}),v=a.memo(({label:t,value:o,color:e,unit:r=""})=>n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[n.jsx("span",{style:{fontFamily:"'Space Mono', monospace",fontSize:"9px",letterSpacing:"0.1em",color:"rgba(148,163,184,0.5)"},children:t}),n.jsx("span",{style:{fontFamily:"'Space Mono', monospace",fontSize:"10px",color:e},children:(o*100).toFixed(1)+(r||"%")})]}),n.jsx("div",{style:{height:"3px",background:"rgba(255,255,255,0.05)",borderRadius:"2px",overflow:"hidden"},children:n.jsx(j.div,{animate:{width:(o*100).toFixed(1)+"%"},transition:{duration:.5,ease:[.22,1,.36,1]},style:{height:"100%",background:e,willChange:"width",borderRadius:"2px"}})})]}));v.displayName="MetricBar";const I=a.memo(({value:t})=>{const o=t>.2?"rgba(52,211,153,1)":t<-.2?"rgba(251,113,133,1)":"rgba(96,165,250,0.7)";return n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{style:{fontFamily:"'Space Mono', monospace",fontSize:"9px",color:"rgba(148,163,184,0.5)",letterSpacing:"0.1em"},children:"TREND STRENGTH"}),n.jsxs("span",{style:{fontFamily:"'Space Mono', monospace",fontSize:"10px",color:o},children:[t>0?"+":"",(t*100).toFixed(0)]})]}),n.jsxs("div",{style:{height:"4px",background:"rgba(255,255,255,0.05)",borderRadius:"2px",position:"relative"},children:[n.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:"1px",background:"rgba(255,255,255,0.1)"}}),n.jsx(j.div,{animate:{left:"50%",width:Math.abs(t)*50+"%",marginLeft:t<0?"-"+Math.abs(t)*50+"%":"0"},transition:{duration:.5},style:{position:"absolute",height:"100%",background:o,willChange:"transform",borderRadius:"2px"}})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{style:{fontFamily:"'Space Mono', monospace",fontSize:"8px",color:"rgba(251,113,133,0.4)"},children:"BEAR"}),n.jsx("span",{style:{fontFamily:"'Space Mono', monospace",fontSize:"8px",color:"rgba(52,211,153,0.4)"},children:"BULL"})]})]})});I.displayName="SignalGauge";const H=a.memo(({symbol:t="BTC"})=>{const{assets:o}=O(),{result:e,push:r,isReady:s}=W(),g=a.useRef(!0),i=a.useRef(0);a.useEffect(()=>(g.current=!0,()=>{g.current=!1}),[]),a.useEffect(()=>{if(!g.current||o.length===0)return;const m=o.find(h=>h.symbol.toLowerCase()===t.toLowerCase());m&&(r({price:m.price,volume:m.volume24h,change:m.change24h,timestamp:Date.now()}),i.current++)},[o,t,r]);const l=a.useMemo(()=>G[e.anomalyLevel],[e.anomalyLevel]),c=a.useMemo(()=>U[e.prediction],[e.prediction]),p=a.useMemo(()=>({display:"flex",alignItems:"center",justifyContent:"space-between"}),[]),f=a.useMemo(()=>({fontFamily:"'Space Mono', monospace",fontSize:"11px",letterSpacing:"0.14em",color:"rgba(255,255,255,0.7)",display:"flex",alignItems:"center",gap:"6px"}),[]),d=a.useMemo(()=>({fontFamily:"'Space Mono', monospace",fontSize:"9px",letterSpacing:"0.1em",color:l.color,background:l.bg,border:"1px solid "+l.color.replace("1)","0.25)").replace("0.8)","0.25)"),borderRadius:"4px",padding:"2px 8px",willChange:"transform"}),[l]),u=a.useMemo(()=>({display:"flex",alignItems:"center",justifyContent:"space-between",background:c.bg,border:"1px solid "+c.color.replace("1)","0.2)").replace("0.7)","0.2)"),borderRadius:"8px",padding:"10px 14px",willChange:"transform"}),[c]),S=a.useMemo(()=>({display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"}),[]),b=a.useMemo(()=>({background:"rgba(255,255,255,0.025)",borderRadius:"6px",padding:"8px 10px",border:"1px solid rgba(255,255,255,0.04)"}),[]),x=a.useMemo(()=>({fontFamily:"'Space Mono', monospace",fontSize:"8px",color:e.tfReady?"rgba(52,211,153,0.6)":"rgba(148,163,184,0.3)",letterSpacing:"0.08em",display:"flex",alignItems:"center",gap:"4px",marginTop:"auto"}),[e.tfReady]);return n.jsxs(A,{style:Y,children:[n.jsxs("div",{style:p,children:[n.jsxs("div",{style:f,children:[n.jsxs("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none","aria-hidden":"true",children:[n.jsx("polygon",{points:"5,1 9,8 1,8",stroke:"rgba(167,139,250,0.8)",strokeWidth:"1",fill:"none"}),n.jsx("circle",{cx:"5",cy:"5",r:"1.5",fill:"rgba(167,139,250,0.8)"})]}),"AI SIGNAL · ",t]}),n.jsx(j.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},style:d,"aria-label":"Anomaly level: "+e.anomalyLevel,children:l.label},e.anomalyLevel)]}),n.jsxs(j.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},style:u,role:"status","aria-label":"Market prediction: "+e.prediction,children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontFamily:"'Space Mono', monospace",fontSize:"9px",color:"rgba(148,163,184,0.4)",letterSpacing:"0.1em",marginBottom:"2px"},children:"PREDICTION"}),n.jsxs("div",{style:{fontFamily:"'Space Mono', monospace",fontSize:"14px",fontWeight:700,color:c.color},children:[c.icon," ",c.label]})]}),n.jsxs("div",{style:{textAlign:"right"},children:[n.jsx("div",{style:{fontFamily:"'Space Mono', monospace",fontSize:"9px",color:"rgba(148,163,184,0.4)",letterSpacing:"0.1em",marginBottom:"2px"},children:"CONFIDENCE"}),n.jsxs("div",{style:{fontFamily:"'Space Mono', monospace",fontSize:"14px",fontWeight:700,color:c.color},children:[(e.signalConfidence*100).toFixed(0),"%"]})]})]},e.prediction),n.jsx(I,{value:e.trendStrength}),n.jsxs("div",{style:_,children:[n.jsx(v,{label:"ANOMALY SCORE",value:e.anomalyScore,color:l.color}),n.jsx(v,{label:"VOLATILITY",value:e.volatilityScore,color:"rgba(251,191,36,0.8)"})]}),n.jsxs("div",{style:S,children:[n.jsxs("div",{style:b,children:[n.jsx("div",{style:{fontFamily:"'Space Mono', monospace",fontSize:"8px",color:"rgba(148,163,184,0.4)",letterSpacing:"0.08em",marginBottom:"3px"},children:"RSI"}),n.jsx("div",{style:{fontFamily:"'Space Mono', monospace",fontSize:"13px",fontWeight:700,color:e.features.rsi>70?"rgba(251,113,133,1)":e.features.rsi<30?"rgba(52,211,153,1)":"rgba(96,165,250,0.9)"},children:e.features.rsi.toFixed(1)})]}),n.jsxs("div",{style:b,children:[n.jsx("div",{style:{fontFamily:"'Space Mono', monospace",fontSize:"8px",color:"rgba(148,163,184,0.4)",letterSpacing:"0.08em",marginBottom:"3px"},children:"MACD"}),n.jsxs("div",{style:{fontFamily:"'Space Mono', monospace",fontSize:"13px",fontWeight:700,color:e.features.macdSignal>0?"rgba(52,211,153,1)":"rgba(251,113,133,1)"},children:[e.features.macdSignal>0?"+":"",(e.features.macdSignal*1e3).toFixed(2)]})]}),n.jsxs("div",{style:b,children:[n.jsx("div",{style:{fontFamily:"'Space Mono', monospace",fontSize:"8px",color:"rgba(148,163,184,0.4)",letterSpacing:"0.08em",marginBottom:"3px"},children:"BB POS"}),n.jsxs("div",{style:{fontFamily:"'Space Mono', monospace",fontSize:"13px",fontWeight:700,color:e.features.bollingerPos>.8?"rgba(251,113,133,1)":e.features.bollingerPos<.2?"rgba(52,211,153,1)":"rgba(96,165,250,0.9)"},children:[(e.features.bollingerPos*100).toFixed(0),"%"]})]}),n.jsxs("div",{style:b,children:[n.jsx("div",{style:{fontFamily:"'Space Mono', monospace",fontSize:"8px",color:"rgba(148,163,184,0.4)",letterSpacing:"0.08em",marginBottom:"3px"},children:"VOL ANOM"}),n.jsxs("div",{style:{fontFamily:"'Space Mono', monospace",fontSize:"13px",fontWeight:700,color:e.features.volumeAnomaly>.5?"rgba(251,191,36,1)":"rgba(148,163,184,0.7)"},children:[(e.features.volumeAnomaly*100).toFixed(0),"%"]})]})]}),n.jsxs("div",{style:x,"aria-label":"AI backend: "+(e.tfReady?"TensorFlow.js "+e.backend:"Pure JS fallback"),children:[n.jsx("span",{style:{width:"5px",height:"5px",borderRadius:"50%",background:e.tfReady?"rgba(52,211,153,0.8)":"rgba(148,163,184,0.3)",display:"inline-block"}}),e.tfReady?"TF.js · "+e.backend.toUpperCase():"Pure JS · "+(s?"Ready":"Loading...")," · "+i.current+" ticks"]})]})});H.displayName="AISignalTile";export{H as default};
