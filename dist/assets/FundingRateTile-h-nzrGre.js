import{j as t}from"./vendor-radix-C8Wf2Xzy.js";import{r as i}from"./vendor-icons-BDtiwxs7.js";import{G as D}from"./GlassCard-FdfA-xA0.js";import{A as v,m as y}from"./vendor-motion-BuE0cxIe.js";import"./index-BrbV88om.js";import"./vendor-utils-CyvyRcDv.js";import"./vendor-query-BhSX34xp.js";import"./vendor-react-DOP_lrST.js";const B=Object.freeze(["BTCUSDT","ETHUSDT","SOLUSDT","BNBUSDT","XRPUSDT","ADAUSDT","AVAXUSDT","DOGEUSDT","LINKUSDT","DOTUSDT"]),M=Object.freeze({BTCUSDT:"rgba(251,191,36,1)",ETHUSDT:"rgba(96,165,250,1)",SOLUSDT:"rgba(167,139,250,1)",BNBUSDT:"rgba(251,191,36,0.7)",XRPUSDT:"rgba(34,211,238,1)",ADAUSDT:"rgba(52,211,153,1)",AVAXUSDT:"rgba(251,113,133,1)",DOGEUSDT:"rgba(251,191,36,0.5)",LINKUSDT:"rgba(96,165,250,0.7)",DOTUSDT:"rgba(196,181,253,1)"});function S(e){return(e*100).toFixed(4)+"%"}function A(e){const o=Math.max(0,e-Date.now()),r=Math.floor(o/36e5),s=Math.floor(o%36e5/6e4),l=Math.floor(o%6e4/1e3);return r.toString().padStart(2,"0")+":"+s.toString().padStart(2,"0")+":"+l.toString().padStart(2,"0")}function b(e){return e>.001?"rgba(52,211,153,1)":e>2e-4?"rgba(52,211,153,0.7)":e>0?"rgba(52,211,153,0.4)":e===0?"rgba(148,163,184,0.4)":e>-2e-4?"rgba(251,113,133,0.4)":e>-.001?"rgba(251,113,133,0.7)":"rgba(251,113,133,1)"}function U(){const[e,o]=i.useState([]),[r,s]=i.useState(!0),[l,f]=i.useState(0),d=i.useRef(!0);i.useRef(null);const m=i.useCallback(async n=>{try{const g=await fetch("https://fapi.binance.com/fapi/v1/premiumIndex",{signal:n});if(!g.ok||!d.current)return;const x=await g.json();if(!d.current)return;const p=B.map(u=>{const c=x.find(h=>h.symbol===u);return{symbol:u,rate:c?parseFloat(c.lastFundingRate):0,nextFundingTime:c?c.nextFundingTime:0,markPrice:c?parseFloat(c.markPrice):0,indexPrice:c?parseFloat(c.indexPrice):0}}).filter(u=>u.markPrice>0);o(p),p.length>0&&p[0].nextFundingTime>0&&f(p[0].nextFundingTime),s(!1)}catch{}},[]);return i.useEffect(()=>{d.current=!0;const n=new AbortController;m(n.signal);const a=setInterval(()=>m(n.signal),3e4);return()=>{d.current=!1,n.abort(),clearInterval(a)}},[m]),{rates:e,loading:r,nextFunding:l}}const j=i.memo(({rates:e})=>{const o=i.useMemo(()=>{let n=0;for(const a of e)Math.abs(a.rate)>n&&(n=Math.abs(a.rate));return n||.001},[e]),r=16,s=4,l=72,f=60,d=e.length*(r+s),m="50%";return t.jsxs("svg",{width:"100%",height:d,style:{display:"block",overflow:"visible"},children:[t.jsx("line",{x1:m,y1:0,x2:m,y2:d,stroke:"rgba(96,165,250,0.15)",strokeWidth:1,strokeDasharray:"3,3"}),e.map((n,a)=>{const g=a*(r+s),x=Math.abs(n.rate)/o,p=b(n.rate),u=M[n.symbol]??"rgba(148,163,184,0.7)",c=n.symbol.replace("USDT",""),h=n.rate>=0;return t.jsxs("g",{children:[t.jsx("text",{x:l-4,y:g+r/2+4,textAnchor:"end",fill:u,fontSize:9,fontFamily:"JetBrains Mono, monospace",fontWeight:"600",children:c}),t.jsx("rect",{x:l,y:g,width:"calc(100% - "+(l+f)+"px)",height:r,rx:2,fill:"rgba(255,255,255,0.03)"}),t.jsx("rect",{x:h?"50%":void 0,y:g,width:x*45+"%",height:r,rx:2,fill:p,style:h?{}:{transform:"translateX(-"+x*45+"%)"}}),t.jsxs("text",{x:"calc(100% - "+(f-4)+"px)",y:g+r/2+4,textAnchor:"start",fill:b(n.rate),fontSize:9,fontFamily:"JetBrains Mono, monospace",fontWeight:"600",children:[n.rate>=0?"+":"",S(n.rate)]})]},n.symbol)})]})});j.displayName="FundingBarChart";const T=i.memo(({nextFundingTime:e})=>{const[o,r]=i.useState("--:--:--");return i.useEffect(()=>{const s=()=>r(A(e));s();const l=setInterval(s,1e3);return()=>clearInterval(l)},[e]),t.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:12,color:"rgba(251,191,36,0.9)",letterSpacing:"0.08em"},children:o})});T.displayName="FundingCountdown";const F=i.memo(({rates:e})=>{const o=i.useMemo(()=>{if(e.length===0)return null;const s=e.filter(n=>n.rate>0).length,l=e.filter(n=>n.rate<0).length,f=e.reduce((n,a)=>n+a.rate,0)/e.length,d=e.reduce((n,a)=>a.rate>n.rate?a:n,e[0]),m=e.reduce((n,a)=>a.rate<n.rate?a:n,e[0]);return{positive:s,negative:l,avg:f,max:d,min:m}},[e]);if(!o)return null;const r={display:"flex",flexDirection:"column",alignItems:"center",gap:2,padding:"6px 10px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(96,165,250,0.08)",borderRadius:6,flex:1};return t.jsxs("div",{style:{display:"flex",gap:6,marginBottom:10},children:[t.jsxs("div",{style:r,children:[t.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:8,color:"rgba(148,163,184,0.4)",letterSpacing:"0.1em"},children:"AVG RATE"}),t.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:11,color:b(o.avg)},children:[o.avg>=0?"+":"",S(o.avg)]})]}),t.jsxs("div",{style:r,children:[t.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:8,color:"rgba(148,163,184,0.4)",letterSpacing:"0.1em"},children:"LONGS PAY"}),t.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:11,color:"rgba(52,211,153,0.9)"},children:[o.positive,"/",e.length]})]}),t.jsxs("div",{style:r,children:[t.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:8,color:"rgba(148,163,184,0.4)",letterSpacing:"0.1em"},children:"SHORTS PAY"}),t.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:11,color:"rgba(251,113,133,0.9)"},children:[o.negative,"/",e.length]})]}),t.jsxs("div",{style:r,children:[t.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:8,color:"rgba(148,163,184,0.4)",letterSpacing:"0.1em"},children:"HIGHEST"}),t.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"rgba(52,211,153,0.9)"},children:[o.max.symbol.replace("USDT","")," ",o.max.rate>=0?"+":"",S(o.max.rate)]})]})]})});F.displayName="FundingSummary";const N=i.memo(()=>{const{rates:e,loading:o,nextFunding:r}=U();return t.jsxs(D,{style:{height:300,display:"flex",flexDirection:"column",padding:"12px"},accentColor:"rgba(251,191,36,1)",children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:11,color:"rgba(226,232,240,0.7)",fontWeight:600,letterSpacing:"0.05em"},children:"FUNDING RATES"}),t.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:9,color:"rgba(148,163,184,0.35)",marginTop:2},children:"BINANCE PERP · 8H INTERVAL"})]}),t.jsxs("div",{style:{textAlign:"right"},children:[t.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:8,color:"rgba(148,163,184,0.35)",marginBottom:2},children:"NEXT FUNDING"}),r>0&&t.jsx(T,{nextFundingTime:r})]})]}),e.length>0&&t.jsx(F,{rates:e}),t.jsx("div",{style:{flex:1,overflowY:"auto",minHeight:0},children:t.jsx(v,{children:o?t.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"rgba(251,191,36,0.4)"},children:t.jsx(y.span,{animate:{opacity:[.3,1,.3]},transition:{duration:1.5,repeat:1/0},children:"FETCHING FUNDING DATA..."})}):t.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:t.jsx(j,{rates:e})})})}),t.jsxs("div",{style:{marginTop:6,display:"flex",gap:12,fontFamily:"'JetBrains Mono', monospace",fontSize:8,color:"rgba(148,163,184,0.25)"},children:[t.jsx("span",{style:{color:"rgba(52,211,153,0.5)"},children:"■"}),t.jsx("span",{children:"POSITIVE = longs pay shorts"}),t.jsx("span",{style:{color:"rgba(251,113,133,0.5)"},children:"■"}),t.jsx("span",{children:"NEGATIVE = shorts pay longs"})]})]})});N.displayName="FundingRateTile";export{N as default};
