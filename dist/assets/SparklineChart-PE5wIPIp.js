import{j as d}from"./vendor-radix-C8Wf2Xzy.js";import{r as u}from"./vendor-icons-BDtiwxs7.js";function S(e,n,o,s,m,b){if(e.clearRect(0,0,o,s),n.length<2)return;const i=Math.min(...n),p=Math.max(...n)-i||1,r=2,l=o,t=s-r*2,a=l/(n.length-1),g=e.createLinearGradient(0,r,0,s);g.addColorStop(0,b?"rgba(52,211,153,0.3)":"rgba(251,113,133,0.3)"),g.addColorStop(1,"rgba(0,0,0,0)"),e.beginPath(),n.forEach((y,c)=>{const f=c*a,v=r+t-(y-i)/p*t;c===0?e.moveTo(f,v):e.lineTo(f,v)}),e.lineTo((n.length-1)*a,s),e.lineTo(0,s),e.closePath(),e.fillStyle=g,e.fill(),e.beginPath(),n.forEach((y,c)=>{const f=c*a,v=r+t-(y-i)/p*t;c===0?e.moveTo(f,v):e.lineTo(f,v)}),e.strokeStyle=m,e.lineWidth=1.5,e.lineJoin="round",e.lineCap="round",e.stroke();const R=(n.length-1)*a,h=r+t-(n[n.length-1]-i)/p*t;e.beginPath(),e.arc(R,h,2.5,0,Math.PI*2),e.fillStyle=m,e.fill()}const T=u.memo(({data:e,width:n,height:o,color:s="auto"})=>{const m=u.useRef(null),b=u.useRef(0),i=u.useRef(!0);u.useEffect(()=>(i.current=!0,()=>{i.current=!1,cancelAnimationFrame(b.current)}),[]);const C=u.useMemo(()=>!e||e.length<2?!0:e[e.length-1]>=e[0],[e]),p=u.useMemo(()=>s!=="auto"?s:C?"rgba(52,211,153,1)":"rgba(251,113,133,1)",[s,C]);return u.useEffect(()=>{!e||e.length<2||!m.current||!i.current||(cancelAnimationFrame(b.current),b.current=requestAnimationFrame(()=>{if(!i.current||!m.current)return;const r=m.current,l=window.devicePixelRatio||1,t=n*l,a=o*l;if(typeof OffscreenCanvas<"u"&&"transferToImageBitmap"in OffscreenCanvas.prototype)try{const R=new OffscreenCanvas(t,a),h=R.getContext("2d");if(h){h.scale(l,l),S(h,e,n,o,p,C);const y=R.transferToImageBitmap();r.width=t,r.height=a,r.style.width=n+"px",r.style.height=o+"px";const c=r.getContext("bitmaprenderer");if(c)c.transferFromImageBitmap(y);else{const f=r.getContext("2d");f&&f.drawImage(y,0,0),y.close()}return}}catch{}r.width=t,r.height=a,r.style.width=n+"px",r.style.height=o+"px";const g=r.getContext("2d");g&&(g.scale(l,l),S(g,e,n,o,p,C))}))},[e,n,o,p,C]),d.jsx("canvas",{ref:m,style:{display:"block",borderRadius:"4px",willChange:"transform"},"aria-hidden":"true"})});T.displayName="SparklineChart";export{T as S};
