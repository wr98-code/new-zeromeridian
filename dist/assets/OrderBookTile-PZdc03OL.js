import{j as t}from"./vendor-radix-C8Wf2Xzy.js";import{r as d}from"./vendor-icons-BDtiwxs7.js";import{G as C}from"./GlassCard-FdfA-xA0.js";import{u as T}from"./useOrderBook-CzPg-KK5.js";import{m as P}from"./vendor-motion-BuE0cxIe.js";import"./index-BrbV88om.js";import"./vendor-utils-CyvyRcDv.js";import"./vendor-query-BhSX34xp.js";import"./vendor-react-DOP_lrST.js";const m=Object.freeze({bid:"rgba(52,211,153,1)",bidBg:"rgba(52,211,153,0.08)",bidBar:"rgba(52,211,153,0.18)",ask:"rgba(251,113,133,1)",askBg:"rgba(251,113,133,0.08)",askBar:"rgba(251,113,133,0.18)",mid:"rgba(96,165,250,1)",text:"rgba(226,232,240,0.85)",faint:"rgba(148,163,184,0.4)",grid:"rgba(96,165,250,0.05)",highlight:"rgba(255,255,255,0.04)"}),y=Object.freeze({btcusdt:"BTC/USDT",ethusdt:"ETH/USDT",solusdt:"SOL/USDT",bnbusdt:"BNB/USDT",xrpusdt:"XRP/USDT"}),w=Object.freeze(["btcusdt","ethusdt","solusdt","bnbusdt","xrpusdt"]);function S(e){return e>=1e4?e.toLocaleString("en-US",{maximumFractionDigits:0}):e>=100?e.toFixed(2):e>=1?e.toFixed(4):e.toFixed(6)}function F(e){return e>=1e3?(e/1e3).toFixed(2)+"K":e>=1?e.toFixed(3):e.toFixed(6)}function R(e){return e>=1e6?"$"+(e/1e6).toFixed(1)+"M":e>=1e3?"$"+(e/1e3).toFixed(1)+"K":"$"+e.toFixed(0)}const j=d.memo(({level:e,side:s,midPrice:r,isFlash:a})=>{const i=s==="bid",n=i?m.bid:m.ask,l=i?m.bidBar:m.askBar,c=e.price*e.size,g=d.useMemo(()=>e.delta==="new"?"rgba(251,191,36,0.9)":e.delta==="up"?n:e.delta==="down"?"rgba(148,163,184,0.5)":n,[e.delta,n]);return t.jsxs(P.div,{initial:!1,animate:{backgroundColor:a?i?"rgba(52,211,153,0.12)":"rgba(251,113,133,0.12)":"transparent"},transition:{duration:.3},style:{position:"relative",display:"grid",gridTemplateColumns:"1fr 1fr 1fr",padding:"2px 8px",fontSize:10,fontFamily:"'JetBrains Mono', monospace",cursor:"default",userSelect:"none"},children:[t.jsx("div",{style:{position:"absolute",top:0,bottom:0,width:e.depthPct+"%",right:i?0:void 0,left:i?void 0:0,background:l,pointerEvents:"none"}}),t.jsx("span",{style:{color:g,fontWeight:600,position:"relative"},children:S(e.price)}),t.jsx("span",{style:{color:m.faint,textAlign:"center",position:"relative"},children:F(e.size)}),t.jsx("span",{style:{color:"rgba(148,163,184,0.3)",textAlign:"right",position:"relative"},children:R(c)})]})});j.displayName="LevelRow";const k=d.memo(({bidAskRatio:e,spread:s,spreadPct:r,midPrice:a})=>{const i=e*100,n=100-i;return t.jsxs("div",{style:{padding:"4px 8px",background:"rgba(96,165,250,0.04)",borderTop:"1px solid rgba(96,165,250,0.08)",borderBottom:"1px solid rgba(96,165,250,0.08)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontFamily:"'JetBrains Mono', monospace",fontSize:9,marginBottom:4},children:[t.jsxs("span",{style:{color:m.bid},children:[i.toFixed(1),"% BID"]}),t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("span",{style:{color:m.mid,fontSize:11,fontWeight:700},children:S(a)}),t.jsxs("span",{style:{color:"rgba(148,163,184,0.3)",marginLeft:6},children:["Δ",S(s)," (",r.toFixed(3),"%)"]})]}),t.jsxs("span",{style:{color:m.ask},children:[n.toFixed(1),"% ASK"]})]}),t.jsxs("svg",{width:"100%",height:"6",style:{display:"block",borderRadius:3,overflow:"hidden"},children:[t.jsx("rect",{x:"0",y:"0",width:i+"%",height:"6",fill:"rgba(52,211,153,0.6)",rx:"3"}),t.jsx("rect",{x:i+"%",y:"0",width:n+"%",height:"6",fill:"rgba(251,113,133,0.6)",rx:"3"})]})]})});k.displayName="SpreadBar";function z(e,s,r,a,i){if(e.clearRect(0,0,a,i),s.length===0&&r.length===0)return;const n=[...s.slice().reverse(),...r],l=Math.max(s.length>0?s[s.length-1].cumSize:0,r.length>0?r[r.length-1].cumSize:0),c=n[0]?.price??0,f=(n[n.length-1]?.price??1)-c||1,o=p=>(p-c)/f*a,b=p=>i-p/(l||1)*i;e.beginPath();const h=s.length>0?o(s[0].price):a/2;e.moveTo(0,i);for(const p of[...s].reverse())e.lineTo(o(p.price),b(p.cumSize));e.lineTo(h,i),e.closePath();const u=e.createLinearGradient(0,0,h,0);u.addColorStop(0,"rgba(52,211,153,0.05)"),u.addColorStop(1,"rgba(52,211,153,0.25)"),e.fillStyle=u,e.fill(),e.strokeStyle="rgba(52,211,153,0.7)",e.lineWidth=1.5,e.stroke(),e.beginPath(),e.moveTo(h,i);for(const p of r)e.lineTo(o(p.price),b(p.cumSize));e.lineTo(a,i),e.closePath();const x=e.createLinearGradient(h,0,a,0);x.addColorStop(0,"rgba(251,113,133,0.25)"),x.addColorStop(1,"rgba(251,113,133,0.05)"),e.fillStyle=x,e.fill(),e.strokeStyle="rgba(251,113,133,0.7)",e.lineWidth=1.5,e.stroke(),e.beginPath(),e.strokeStyle="rgba(96,165,250,0.4)",e.lineWidth=1,e.setLineDash([4,4]),e.moveTo(h,0),e.lineTo(h,i),e.stroke(),e.setLineDash([])}const v=d.memo(({bids:e,asks:s})=>{const r=d.useRef(null),a=d.useRef(null);return d.useEffect(()=>{const i=r.current,n=a.current;if(!i||!n)return;const l=window.devicePixelRatio||1,c=n.clientWidth,g=n.clientHeight;i.width=c*l,i.height=g*l,i.style.width=c+"px",i.style.height=g+"px";const f=i.getContext("2d");f&&(f.scale(l,l),z(f,e,s,c,g))},[e,s]),t.jsx("div",{ref:a,style:{height:60,position:"relative"},children:t.jsx("canvas",{ref:r,style:{width:"100%",height:"100%",display:"block"}})})});v.displayName="DepthChart";const B=12,L=d.memo(()=>{const[e,s]=d.useState("btcusdt"),r=T(e),a=d.useMemo(()=>r.bids.slice(0,B),[r.bids]),i=d.useMemo(()=>r.asks.slice(0,B),[r.asks]),n=d.useCallback(o=>s(o),[]),l=d.useMemo(()=>r.wsStatus==="connected"?"rgba(52,211,153,0.8)":r.wsStatus==="reconnecting"?"rgba(251,191,36,0.8)":"rgba(251,113,133,0.8)",[r.wsStatus]),c={fontFamily:"'JetBrains Mono', monospace",fontSize:9,padding:"2px 6px",borderRadius:3,border:"1px solid rgba(96,165,250,0.12)",background:"transparent",color:"rgba(148,163,184,0.5)",cursor:"pointer"},g={...c,background:"rgba(96,165,250,0.1)",color:"rgba(226,232,240,0.9)",borderColor:"rgba(96,165,250,0.35)"},f={display:"grid",gridTemplateColumns:"1fr 1fr 1fr",padding:"4px 8px",fontFamily:"'JetBrains Mono', monospace",fontSize:9,color:"rgba(148,163,184,0.3)",letterSpacing:"0.08em",textTransform:"uppercase"};return t.jsxs(C,{style:{height:420,display:"flex",flexDirection:"column",padding:0,overflow:"hidden"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px 6px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[t.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:11,color:"rgba(226,232,240,0.8)",fontWeight:600,letterSpacing:"0.05em"},children:"ORDER BOOK"}),t.jsx("span",{style:{fontSize:8,color:l},children:"●"}),t.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:9,color:l},children:r.wsStatus.toUpperCase()})]}),t.jsx("div",{style:{display:"flex",gap:3},children:w.map(o=>t.jsx("button",{style:e===o?g:c,onClick:()=>n(o),"aria-label":"Select "+(y[o]??o),"aria-pressed":e===o,children:(y[o]??o).split("/")[0]},o))})]}),t.jsx("div",{style:{padding:"0 8px"},children:t.jsx(v,{bids:r.bids,asks:r.asks})}),t.jsx(k,{bidAskRatio:r.bidAskRatio,spread:r.spread,spreadPct:r.spreadPct,midPrice:r.midPrice}),t.jsxs("div",{style:f,children:[t.jsx("span",{children:"PRICE (USDT)"}),t.jsx("span",{style:{textAlign:"center"},children:"SIZE"}),t.jsx("span",{style:{textAlign:"right"},children:"TOTAL"})]}),t.jsxs("div",{style:{flex:1,overflowY:"hidden",minHeight:0},children:[t.jsx("div",{children:[...i].reverse().map((o,b)=>t.jsx(j,{level:o,side:"ask",midPrice:r.midPrice,isFlash:b===0&&o.delta==="new"},o.price+"_ask"))}),t.jsx("div",{children:a.map((o,b)=>t.jsx(j,{level:o,side:"bid",midPrice:r.midPrice,isFlash:b===0&&o.delta==="new"},o.price+"_bid"))})]}),t.jsxs("div",{style:{padding:"4px 8px",display:"flex",justifyContent:"space-between",fontFamily:"'JetBrains Mono', monospace",fontSize:9,color:"rgba(148,163,184,0.25)",borderTop:"1px solid rgba(96,165,250,0.06)"},children:[t.jsxs("span",{children:["BINANCE · ",(y[e]??e).toUpperCase()]}),t.jsx("span",{children:"DEPTH 20 · 100ms"})]})]})});L.displayName="OrderBookTile";export{L as default};
