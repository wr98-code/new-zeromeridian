import{j as t}from"./vendor-radix-C8Wf2Xzy.js";import{r as i,n as ee,Y as te,A as be,Z as O,o as ne,m as ve,l as we,$ as je,a0 as Se,h as ze,a1 as Ce,T as Te,k as Ae,a2 as Fe,a3 as ke}from"./vendor-icons-BDtiwxs7.js";import{b as I,u as T}from"./vendor-query-BhSX34xp.js";import{u as Ue,c as C,d as H,f as $,b as De,g as Me}from"./index-BrbV88om.js";import{A as Re,m as R}from"./vendor-motion-BuE0cxIe.js";import"./vendor-utils-CyvyRcDv.js";import"./vendor-react-DOP_lrST.js";const Ee="https://api.thegraph.com/subgraphs/name/uniswap/uniswap-v3",B=6e4,Be=5e5,_e=1e5,Le=Object.freeze(`{
  pools(
    first: 30
    orderBy: totalValueLockedUSD
    orderDirection: desc
    where: { totalValueLockedUSD_gt: "${Be}" }
  ) {
    id
    token0 { symbol }
    token1 { symbol }
    feeTier
    totalValueLockedUSD
    poolDayData(first: 1 orderBy: date orderDirection: desc) {
      volumeUSD
      txCount
      feesUSD
    }
  }
  factories(first: 1) {
    txCount
    totalValueLockedUSD
    totalVolumeUSD
    poolCount
  }
}`),Ie=Object.freeze(`{
  swaps(
    first: 50
    orderBy: timestamp
    orderDirection: desc
    where: { amountUSD_gt: "${_e}" }
  ) {
    id
    timestamp
    amountUSD
    token0 { symbol }
    token1 { symbol }
    sender
    amount0
    amount1
  }
}`);function x(a){const e=Number(a);return isFinite(e)?e:0}function F(a){return typeof a=="string"?a:""}async function ae(a,e){const o=await fetch(Ee,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a}),signal:e});if(!o.ok)throw new Error("graph fetch failed: "+o.status);return o.json()}function We(a){return a.map(e=>{const o=e.token0??{},n=e.token1??{},l=Array.isArray(e.poolDayData)?e.poolDayData[0]??{}:{},m=x(e.totalValueLockedUSD),d=x(l.volumeUSD),r=x(l.feesUSD),f=m>0?r*365/m*100:0;return{id:F(e.id),token0Symbol:F(o.symbol),token1Symbol:F(n.symbol),feeTier:x(e.feeTier)/1e4,tvlUsd:m,volumeUsd24h:d,txCount24h:x(l.txCount),apr:f}})}function Oe(a){const e=a[0];return e?{totalVolumeUsd:x(e.totalVolumeUSD),totalTvlUsd:x(e.totalValueLockedUSD),txCount24h:x(e.txCount),poolCount:x(e.poolCount)}:null}function Ne(a){return a.map(e=>{const o=e.token0??{},n=e.token1??{},m=x(e.amount0)<0?"buy":"sell";return{id:F(e.id),timestamp:x(e.timestamp)*1e3,amountUsd:x(e.amountUSD),token0:F(o.symbol),token1:F(n.symbol),sender:F(e.sender),type:m}})}function qe(){const a=I(),e=T({queryKey:["graph-pools"],queryFn:async({signal:c})=>ae(Le,c),staleTime:B,refetchInterval:B,retry:2,retryDelay:c=>Math.min(1e3*2**c,3e4)}),o=T({queryKey:["graph-swaps"],queryFn:async({signal:c})=>ae(Ie,c),staleTime:B,refetchInterval:B,retry:2,retryDelay:c=>Math.min(1e3*2**c,3e4)}),n=i.useMemo(()=>{const c=e.data?.data?.pools;return Array.isArray(c)?We(c):[]},[e.data]),l=i.useMemo(()=>{const c=e.data?.data?.factories;return Array.isArray(c)?Oe(c):null},[e.data]),m=i.useMemo(()=>{const c=o.data?.data?.swaps;return Array.isArray(c)?Ne(c):[]},[o.data]),d=e.isLoading||o.isLoading,r=i.useMemo(()=>e.isError?"Failed to fetch DEX pool data":o.isError?"Failed to fetch whale swaps":null,[e.isError,o.isError]),f=i.useMemo(()=>Math.max(e.dataUpdatedAt,o.dataUpdatedAt),[e.dataUpdatedAt,o.dataUpdatedAt]),u=i.useCallback(()=>{a.invalidateQueries({queryKey:["graph-pools"]}),a.invalidateQueries({queryKey:["graph-swaps"]})},[a]);return i.useMemo(()=>({pools:n,whaleSwaps:m,dexStats:l,loading:d,error:r,lastUpdate:f,refetch:u}),[n,m,l,d,r,f,u])}const Ge="https://api.dune.com/api/v1",M=5*6e4,N=Object.freeze({netflow:"1258228",whales:"2394941",gas:"1435786"});function S(a){const e=Number(a);return isFinite(e)?e:0}function k(a){return typeof a=="string"?a:""}async function q(a,e){const o=Ge+"/query/"+a+"/results?limit=50",n=await fetch(o,{headers:{"X-Dune-API-Key":"public"},signal:e});if(n.status===401||n.status===403)return{result:{rows:[]}};if(!n.ok)throw new Error("dune fetch failed: "+n.status);return n.json()}function Pe(a){return a.slice(0,30).map(e=>({exchange:k(e.exchange??e.Exchange??e.name),netflowUsd:S(e.netflow_usd??e.net_flow_usd??e.netflow),inflowUsd:S(e.inflow_usd??e.inflow),outflowUsd:S(e.outflow_usd??e.outflow),date:k(e.date??e.day??e.timestamp)})).filter(e=>e.exchange!=="")}function Ve(a){const e=Object.freeze(["transfer","deposit","withdrawal"]);return a.slice(0,50).map(o=>{const n=k(o.action??o.type??"transfer").toLowerCase(),l=e.includes(n)?n:"transfer";return{wallet:k(o.wallet??o.from_address??o.address),asset:k(o.asset??o.symbol??o.token),amountUsd:S(o.amount_usd??o.value_usd??o.amount),action:l,timestamp:S(o.block_time??o.timestamp)*(S(o.block_time)>1e12?1:1e3),protocol:k(o.protocol??o.project??"Unknown")}}).filter(o=>o.wallet!=="")}function He(a){return a.slice(0,14).map(e=>({date:k(e.date??e.day??e.time),avgGasGwei:S(e.avg_gas_price_gwei??e.avg_gwei??e.gas_price),txCount:S(e.tx_count??e.transactions??e.count),medianGwei:S(e.median_gas_gwei??e.median_gwei??e.avg_gas_price_gwei)})).filter(e=>e.date!=="")}function Qe(){const a=I(),e=T({queryKey:["dune-netflow"],queryFn:async({signal:p})=>q(N.netflow,p),staleTime:M,refetchInterval:M,retry:1,retryDelay:p=>Math.min(1e3*2**p,3e4)}),o=T({queryKey:["dune-whales"],queryFn:async({signal:p})=>q(N.whales,p),staleTime:M,refetchInterval:M,retry:1,retryDelay:p=>Math.min(1e3*2**p,3e4)}),n=T({queryKey:["dune-gas"],queryFn:async({signal:p})=>q(N.gas,p),staleTime:M,refetchInterval:M,retry:1,retryDelay:p=>Math.min(1e3*2**p,3e4)}),l=i.useMemo(()=>{const p=e.data?.result?.rows;return Array.isArray(p)?Pe(p):[]},[e.data]),m=i.useMemo(()=>{const p=o.data?.result?.rows;return Array.isArray(p)?Ve(p):[]},[o.data]),d=i.useMemo(()=>{const p=n.data?.result?.rows;return Array.isArray(p)?He(p):[]},[n.data]),r=e.isLoading||o.isLoading||n.isLoading,f=i.useMemo(()=>e.isError?"Failed to fetch exchange netflow data":o.isError?"Failed to fetch whale transaction data":n.isError?"Failed to fetch gas metrics":null,[e.isError,o.isError,n.isError]),u=i.useMemo(()=>Math.max(e.dataUpdatedAt,o.dataUpdatedAt,n.dataUpdatedAt),[e.dataUpdatedAt,o.dataUpdatedAt,n.dataUpdatedAt]),c=i.useCallback(()=>{a.invalidateQueries({queryKey:["dune-netflow"]}),a.invalidateQueries({queryKey:["dune-whales"]}),a.invalidateQueries({queryKey:["dune-gas"]})},[a]);return i.useMemo(()=>({whaleMoves:m,netflows:l,gasMetrics:d,loading:r,error:f,lastUpdate:u,refetch:c}),[m,l,d,r,f,u,c])}const Ke="https://min-api.cryptocompare.com/data",_=5*6e4,G="BTC",oe=90,Q=Object.freeze(["BTC","ETH","SOL","BNB","XRP","AVAX","DOGE","ADA"]);function b(a){const e=Number(a);return isFinite(e)?e:0}function P(a){return typeof a=="string"?a:""}async function V(a,e){const o=await fetch(Ke+a,{headers:{authorization:"Apikey demo"},signal:e});if(!o.ok)throw new Error("cryptocompare fetch failed: "+o.status);return o.json()}function $e(a){return a.filter(e=>b(e.time)>0).map(e=>({time:b(e.time)*1e3,open:b(e.open),high:b(e.high),low:b(e.low),close:b(e.close),volume:b(e.volumefrom),volumeUsd:b(e.volumeto)}))}function Xe(a){return a.slice(0,20).map(e=>({exchange:P(e.exchange),fromSymbol:P(e.fromSymbol),toSymbol:P(e.toSymbol),volume24h:b(e.volume24h),volume24hUsd:b(e.volume24hTo),lastPrice:b(e.price)}))}function Ye(a=G){const e=I(),o=i.useMemo(()=>Q.includes(a)?a:G,[a]),n=T({queryKey:["cc-ohlcv",o],queryFn:async({signal:y})=>V("/v2/histoday?fsym="+o+"&tsym=USD&limit="+oe+"&aggregate=1",y),staleTime:_,refetchInterval:_,retry:2,retryDelay:y=>Math.min(1e3*2**y,3e4)}),l=T({queryKey:["cc-toppairs",o],queryFn:async({signal:y})=>V("/top/exchanges?fsym="+o+"&tsym=USD&limit=20",y),staleTime:_,refetchInterval:_,retry:2,retryDelay:y=>Math.min(1e3*2**y,3e4)}),m=i.useMemo(()=>{const y=n.data?.Data?.Data;return Array.isArray(y)?$e(y):[]},[n.data]),d=i.useMemo(()=>{const y=l.data?.Data;return Array.isArray(y)?Xe(y):[]},[l.data]),r=n.isLoading||l.isLoading,f=i.useMemo(()=>n.isError?"Failed to fetch OHLCV candle data":l.isError?"Failed to fetch top trading pairs":null,[n.isError,l.isError]),u=i.useMemo(()=>Math.max(n.dataUpdatedAt,l.dataUpdatedAt),[n.dataUpdatedAt,l.dataUpdatedAt]),c=i.useCallback(y=>{const U=Q.includes(y)?y:G;e.prefetchQuery({queryKey:["cc-ohlcv",U],queryFn:async({signal:v})=>V("/v2/histoday?fsym="+U+"&tsym=USD&limit="+oe+"&aggregate=1",v)})},[e]),p=i.useCallback(()=>{e.invalidateQueries({queryKey:["cc-ohlcv",o]}),e.invalidateQueries({queryKey:["cc-toppairs",o]})},[e,o]);return i.useMemo(()=>({candles:m,topPairs:d,symbol:o,loading:r,error:f,lastUpdate:u,setSymbol:c,refetch:p}),[m,d,o,r,f,u,c,p])}const Ze="https://api.coingecko.com/api/v3",re=3*6e4;function L(a){const e=Number(a);return isFinite(e)?e:0}function E(a){return typeof a=="string"?a:""}async function Je(a,e){const o=await fetch(Ze+a,{headers:{accept:"application/json","x-cg-demo-api-key":"demo"},signal:e});if(o.status===429)throw new Error("rate limited");if(!o.ok)throw new Error("coingecko fetch failed: "+o.status);return o.json()}function et(a){return a.slice(0,15).map(({item:e})=>{const o=e??{},n=o.data??{},l=E(n.price??o.current_price),m=l.startsWith("$")?L(l.replace(/[$,]/g,"")):L(l),d=o.platforms??{},r=Object.entries(d)[0];return{id:E(o.id),name:E(o.name),symbol:E(o.symbol).toUpperCase(),thumb:E(o.thumb??o.small),priceUsd:m,change24h:L(n.price_change_percentage_24h?.usd??0),volume24h:L(n.total_volume),chain:r?r[0]:"ethereum",address:r?r[1]:""}}).filter(e=>e.id!=="")}function tt(){const a=I(),e=T({queryKey:["cg-onchain-trending"],queryFn:async({signal:r})=>Je("/search/trending",r),staleTime:re,refetchInterval:re,retry:2,retryDelay:r=>Math.min(1e3*2**r,3e4)}),o=i.useMemo(()=>{const r=e.data?.coins;return Array.isArray(r)?et(r):[]},[e.data]),n=e.isLoading,l=i.useMemo(()=>e.isError?"Failed to fetch on-chain trending data":null,[e.isError]),m=i.useMemo(()=>e.dataUpdatedAt,[e.dataUpdatedAt]),d=i.useCallback(()=>{a.invalidateQueries({queryKey:["cg-onchain-trending"]})},[a]);return i.useMemo(()=>({trending:o,loading:n,error:l,lastUpdate:m,refetch:d}),[o,n,l,m,d])}const at=Object.freeze([{id:"overview",label:"Overview",icon:"globe"},{id:"whales",label:"Whale Tracker",icon:"whale"},{id:"dex",label:"DEX Pools",icon:"layers"},{id:"ohlcv",label:"OHLCV",icon:"chart"},{id:"netflow",label:"Netflow",icon:"flow"}]),se=Object.freeze({transfer:"rgba(148,163,184,1)",deposit:"rgba(52,211,153,1)",withdrawal:"rgba(251,113,133,1)",buy:"rgba(52,211,153,1)",sell:"rgba(251,113,133,1)"}),ot=200;function ie(a){return a.length<12?a:a.slice(0,6)+"…"+a.slice(-4)}function rt(a){const e=Date.now()-a;return e<6e4?Math.floor(e/1e3)+"s ago":e<36e5?Math.floor(e/6e4)+"m ago":e<864e5?Math.floor(e/36e5)+"h ago":Math.floor(e/864e5)+"d ago"}const le=i.memo(({label:a,value:e,accent:o,icon:n})=>t.jsxs("div",{style:{flex:1,minWidth:130,borderRadius:12,padding:16,display:"flex",flexDirection:"column",gap:6,background:"var(--zm-glass-bg)",border:"1px solid var(--zm-glass-border)",willChange:"transform"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsx("span",{style:{color:o},children:n}),t.jsx("span",{style:{fontSize:10,fontFamily:"monospace",textTransform:"uppercase",letterSpacing:"0.1em",color:"var(--zm-text-faint)"},children:a})]}),t.jsx("span",{style:{fontSize:20,fontFamily:"monospace",fontWeight:700,color:"var(--zm-text-primary)"},children:e})]}));le.displayName="StatBadge";const ce=i.memo(({candles:a,symbol:e})=>{const o=i.useRef(null),n=i.useRef(!0);return i.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),i.useEffect(()=>{const l=o.current;if(!l||a.length===0)return;const m=window.devicePixelRatio||1,d=l.getBoundingClientRect();l.width=d.width*m,l.height=d.height*m;const r=l.getContext("2d");if(!r||!n.current)return;r.scale(m,m);const f=d.width,u=d.height,c={top:16,right:16,bottom:32,left:56},p=a.map(g=>g.high),y=a.map(g=>g.low),U=Math.max(...p),v=Math.min(...y),z=U-v||1,W=f-c.left-c.right,s=u-c.top-c.bottom,h=Math.max(1,W/a.length);r.clearRect(0,0,f,u),r.strokeStyle="var(--zm-divider)",r.lineWidth=1;for(let g=0;g<=4;g++){const w=c.top+s/4*g;r.beginPath(),r.moveTo(c.left,w),r.lineTo(f-c.right,w),r.stroke()}r.fillStyle="rgba(148,163,184,0.6)",r.font="10px monospace",r.textAlign="right";for(let g=0;g<=4;g++){const w=1-g/4,A=v+z*w,D=c.top+s/4*g;r.fillText($(A),c.left-4,D+3)}a.forEach((g,w)=>{const A=c.left+w*h,D=c.top+s*(1-(g.high-v)/z),ue=c.top+s*(1-(g.low-v)/z),X=c.top+s*(1-(g.open-v)/z),Y=c.top+s*(1-(g.close-v)/z),Z=g.close>=g.open?"rgba(52,211,153,1)":"rgba(251,113,133,1)",he=Math.max(1,Math.abs(Y-X)),xe=Math.min(X,Y),J=Math.max(1,h*.7);r.strokeStyle=Z,r.lineWidth=1,r.beginPath(),r.moveTo(A+h/2,D),r.lineTo(A+h/2,ue),r.stroke(),r.fillStyle=Z,r.fillRect(A+(h-J)/2,xe,J,he)}),r.fillStyle="rgba(148,163,184,0.5)",r.font="10px monospace",r.textAlign="center",a.forEach((g,w)=>{if(w%15!==0)return;const A=c.left+w*h+h/2,D=new Date(g.time);r.fillText(D.getMonth()+1+"/"+D.getDate(),A,u-c.bottom+14)}),r.fillStyle="rgba(96,165,250,0.8)",r.font="bold 12px monospace",r.textAlign="left",r.fillText(e+"/USD  90D",c.left,c.top-4)},[a,e]),t.jsx("canvas",{ref:o,"aria-label":"OHLCV candlestick chart",role:"img",style:{width:"100%",height:"260px",willChange:"transform"}})});ce.displayName="OHLCVChart";const K=i.memo(({data:a})=>{const e=i.useMemo(()=>Math.max(...a.map(o=>o.avgGasGwei),1),[a]);return a.length===0?t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:96,fontSize:14,color:"var(--zm-text-faint)"},children:"No gas data"}):t.jsx("svg",{viewBox:"0 0 "+a.length*28+" 80",style:{width:"100%",height:"80px"},"aria-label":"Gas price bar chart",role:"img",children:a.map((o,n)=>{const l=Math.max(2,o.avgGasGwei/e*64),m=n*28+4,d=70-l,r=o.avgGasGwei>e*.75?"rgba(251,113,133,0.8)":o.avgGasGwei>e*.4?"rgba(251,191,36,0.8)":"rgba(52,211,153,0.8)";return t.jsxs("g",{children:[t.jsx("rect",{x:m,y:d,width:20,height:l,rx:2,fill:r}),t.jsx("text",{x:m+10,y:78,textAnchor:"middle",fontSize:8,fill:"rgba(148,163,184,0.5)",children:o.avgGasGwei.toFixed(0)})]},o.date)})})});K.displayName="GasChart";const de=i.memo(({item:a,maxAbs:e})=>{const o=a.netflowUsd<0,n=e>0?Math.abs(a.netflowUsd)/e*ot:0,l=o?"rgba(52,211,153,0.7)":"rgba(251,113,133,0.7)";return t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,paddingTop:8,paddingBottom:8,borderBottom:"1px solid rgba(148,163,184,0.08)"},children:[t.jsx("span",{style:{fontFamily:"monospace",fontSize:14,width:112,color:"var(--zm-text-primary)"},children:a.exchange}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flex:1},children:[t.jsx("div",{style:{width:n,height:8,background:l,borderRadius:2,transition:"width 0.4s ease",willChange:"width"}}),t.jsxs("span",{style:{fontFamily:"monospace",fontSize:12,color:l},children:[o?"↓ ":"↑ ",C(Math.abs(a.netflowUsd))]})]})]})});de.displayName="NetflowRow";const me=i.memo(({swap:a})=>{const e=se[a.type],o=a.type==="buy"?Fe:ke;return t.jsxs(R.div,{initial:{opacity:0,x:-8},animate:{opacity:1,x:0,display:"flex",alignItems:"center",gap:12,paddingTop:10,paddingBottom:10,borderBottom:"1px solid rgba(148,163,184,0.06)",willChange:"transform, opacity"},children:[t.jsx(o,{size:14,style:{flexShrink:0}}),t.jsxs("div",{style:{flex:1,minWidth:0},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsx("span",{style:{fontFamily:"monospace",fontSize:12,color:"var(--zm-text-secondary)"},children:ie(a.sender)}),t.jsx("span",{style:{fontSize:10,padding:"2px 6px",borderRadius:4,fontFamily:"monospace",textTransform:"uppercase",background:"rgba(148,163,184,0.1)",color:e},children:a.type})]}),t.jsxs("div",{style:{fontFamily:"monospace",fontSize:11,color:"var(--zm-text-faint)"},children:[a.token0,"/",a.token1,"  •  ",rt(a.timestamp)]})]}),t.jsx("span",{style:{fontFamily:"monospace",fontWeight:700,fontSize:14,color:e},children:C(a.amountUsd)})]})});me.displayName="WhaleRow";const pe=i.memo(({pool:a,rank:e})=>t.jsxs("div",{style:{display:"grid",alignItems:"center",gap:12,paddingTop:10,paddingBottom:10,gridTemplateColumns:"24px 1fr 90px 90px 70px 70px",borderBottom:"1px solid rgba(148,163,184,0.06)"},children:[t.jsx("span",{style:{fontFamily:"monospace",fontSize:12,textAlign:"center",color:"var(--zm-text-faint)"},children:e}),t.jsxs("div",{children:[t.jsxs("div",{style:{fontFamily:"monospace",fontSize:14,fontWeight:700,color:"var(--zm-text-primary)"},children:[a.token0Symbol,"/",a.token1Symbol]}),t.jsxs("div",{style:{fontFamily:"monospace",fontSize:10,color:"var(--zm-text-faint)"},children:[a.feeTier.toFixed(2),"% fee"]})]}),t.jsx("span",{style:{fontFamily:"monospace",fontSize:14,textAlign:"right",color:"var(--zm-text-secondary)"},children:C(a.tvlUsd)}),t.jsx("span",{style:{fontFamily:"monospace",fontSize:14,textAlign:"right",color:"var(--zm-text-secondary)"},children:C(a.volumeUsd24h)}),t.jsx("span",{style:{fontFamily:"monospace",fontSize:14,textAlign:"right",color:"rgba(52,211,153,1)"},children:Me(a.apr)}),t.jsx("span",{style:{fontFamily:"monospace",fontSize:12,textAlign:"right",color:"var(--zm-text-faint)"},children:H(a.txCount24h)})]}));pe.displayName="PoolRow";const fe=i.memo(({token:a})=>{const e=a.change24h>=0,o=e?"rgba(52,211,153,1)":"rgba(251,113,133,1)",n=e?Te:Ae;return t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:12,borderRadius:8,background:"var(--zm-glass-bg)",border:"1px solid var(--zm-glass-border)",willChange:"transform"},children:[a.thumb?t.jsx("img",{src:a.thumb,alt:a.symbol,width:28,height:28,style:{borderRadius:"50%",flexShrink:0}}):t.jsx("div",{style:{width:28,height:28,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:10,fontWeight:700,flexShrink:0,background:"rgba(96,165,250,0.15)",color:"rgba(96,165,250,1)"},children:a.symbol.slice(0,2)}),t.jsxs("div",{style:{flex:1,minWidth:0},children:[t.jsx("div",{style:{fontFamily:"monospace",fontSize:14,fontWeight:700,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"var(--zm-text-primary)"},children:a.symbol}),t.jsx("div",{style:{fontFamily:"monospace",fontSize:10,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textTransform:"capitalize",color:"var(--zm-text-faint)"},children:a.chain})]}),t.jsxs("div",{style:{textAlign:"right"},children:[t.jsx("div",{style:{fontFamily:"monospace",fontSize:14,fontWeight:700,color:"var(--zm-text-primary)"},children:a.priceUsd>0?$(a.priceUsd):"—"}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:2,justifyContent:"flex-end"},children:[t.jsx(n,{size:10,style:{color:o}}),t.jsx("span",{style:{fontFamily:"monospace",fontSize:11,color:o},children:De(a.change24h)})]})]})]})});fe.displayName="TrendingCard";const ge=i.memo(({id:a,label:e,active:o,onClick:n})=>{const l=i.useCallback(()=>n(a),[a,n]);return t.jsx("button",{type:"button",onClick:l,"aria-selected":o,role:"tab",style:{position:"relative",padding:"8px 16px",fontFamily:"monospace",fontSize:12,textTransform:"uppercase",letterSpacing:"0.05em",borderRadius:8,transition:"color 0.15s,background 0.15s",cursor:"pointer",background:o?"rgba(96,165,250,0.15)":"transparent",color:o?"rgba(96,165,250,1)":"var(--zm-text-faint)",border:o?"1px solid rgba(96,165,250,0.3)":"1px solid transparent",willChange:"transform"},children:e})});ge.displayName="TabButton";const j=i.memo(()=>t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8,paddingTop:24,paddingBottom:24,color:"var(--zm-text-faint)"},children:[t.jsx(ne,{size:16,style:{animation:"spin 1s linear infinite",color:"var(--zm-accent)"}}),t.jsx("span",{style:{fontFamily:"monospace",fontSize:12},children:"Fetching on-chain data…"})]}));j.displayName="LoadingRow";const ye=i.memo(({active:a,onChange:e})=>t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},role:"group","aria-label":"Asset selector",children:Q.map(o=>{const n=o===a,l=()=>e(o);return t.jsx("button",{type:"button",onClick:l,"aria-pressed":n,style:{padding:"4px 12px",borderRadius:4,fontFamily:"monospace",fontSize:12,textTransform:"uppercase",cursor:"pointer",background:n?"rgba(96,165,250,0.2)":"var(--zm-divider)",color:n?"rgba(96,165,250,1)":"var(--zm-text-faint)",border:n?"1px solid rgba(96,165,250,0.4)":"1px solid transparent",willChange:"transform"},children:o},o)})}));ye.displayName="SymbolSelector";const nt=i.memo(()=>{const a=i.useRef(!0),[e,o]=i.useState("overview"),[n,l]=i.useState("BTC");i.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]);const{isMobile:m}=Ue(),d=qe(),r=Qe(),f=Ye(n),u=tt(),c=i.useCallback(s=>o(s),[]),p=i.useCallback(s=>{a.current&&(l(s),f.setSymbol(s))},[f]),y=i.useCallback(()=>{d.refetch(),r.refetch(),f.refetch(),u.refetch()},[d,r,f,u]),U=i.useMemo(()=>Math.max(...r.netflows.map(s=>Math.abs(s.netflowUsd)),1),[r.netflows]),v=d.loading||r.loading||f.loading||u.loading,z=d.error||r.error||f.error||u.error,W=i.useMemo(()=>{if(!d.dexStats)return[];const s=d.dexStats;return[{label:"DEX Volume 24h",value:C(s.totalVolumeUsd),accent:"rgba(96,165,250,1)",icon:t.jsx(ee,{size:14})},{label:"DEX TVL",value:C(s.totalTvlUsd),accent:"rgba(52,211,153,1)",icon:t.jsx(te,{size:14})},{label:"Pool Count",value:H(s.poolCount),accent:"rgba(167,139,250,1)",icon:t.jsx(be,{size:14})},{label:"Tx Count",value:H(s.txCount24h),accent:"rgba(251,191,36,1)",icon:t.jsx(O,{size:14})}]},[d.dexStats]);return t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:20,padding:"16px",minHeight:"100vh",background:"var(--zm-bg-deep)"},children:[t.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"flex-start",justifyContent:"space-between",gap:16},children:[t.jsxs("div",{children:[t.jsx("h1",{style:{fontFamily:"monospace",fontSize:24,fontWeight:700,letterSpacing:"-0.025em",color:"var(--zm-text-primary)"},children:"On-Chain Analytics"}),t.jsx("p",{style:{fontFamily:"monospace",fontSize:12,marginTop:4,color:"var(--zm-text-faint)"},children:"The Graph  •  Dune Analytics  •  CryptoCompare  •  CoinGecko On-Chain"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[v&&t.jsx(ne,{size:14,style:{animation:"spin 1s linear infinite",color:"var(--zm-accent)"}}),t.jsx("button",{type:"button",onClick:y,"aria-label":"Refresh all on-chain data",style:{padding:8,borderRadius:8,transition:"color 0.15s,background 0.15s",cursor:"pointer",background:"var(--zm-glass-bg)",border:"1px solid var(--zm-glass-border)",color:"var(--zm-text-faint)",willChange:"transform"},children:t.jsx(ve,{size:14})})]})]}),z&&t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"10px 16px",borderRadius:8,fontSize:14,fontFamily:"monospace",background:"rgba(251,113,133,0.08)",border:"1px solid rgba(251,113,133,0.2)",color:"rgba(251,113,133,1)"},children:[t.jsx(we,{size:14}),z]}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},role:"tablist","aria-label":"On-chain sections",children:at.map(s=>t.jsx(ge,{id:s.id,label:s.label,active:e===s.id,onClick:c},s.id))}),t.jsxs(Re,{mode:"wait",children:[e==="overview"&&t.jsxs(R.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8,display:"flex",flexDirection:"column",gap:20},style:{willChange:"transform, opacity"},children:[d.loading?t.jsx(j,{}):t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:12},children:W.map(s=>t.jsx(le,{label:s.label,value:s.value,accent:s.accent,icon:s.icon},s.label))}),t.jsxs("div",{style:{borderRadius:12,padding:16,background:"var(--zm-glass-bg)",border:"1px solid var(--zm-glass-border)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:16},children:[t.jsx(je,{size:14,style:{color:"rgba(251,113,133,1)"}}),t.jsx("span",{style:{fontFamily:"monospace",fontSize:12,textTransform:"uppercase",letterSpacing:"0.1em",fontWeight:700,color:"var(--zm-text-primary)"},children:"Trending On-Chain"})]}),u.loading?t.jsx(j,{}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:m?"1fr 1fr":"repeat(3,1fr)",gap:8},children:u.trending.slice(0,9).map(s=>t.jsx(fe,{token:s},s.id))})]}),t.jsxs("div",{style:{borderRadius:12,padding:16,background:"var(--zm-glass-bg)",border:"1px solid var(--zm-glass-border)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[t.jsx(O,{size:14,style:{color:"rgba(251,191,36,1)"}}),t.jsx("span",{style:{fontFamily:"monospace",fontSize:12,textTransform:"uppercase",letterSpacing:"0.1em",fontWeight:700,color:"var(--zm-text-primary)"},children:"ETH Gas History  (Gwei)"})]}),r.loading?t.jsx(j,{}):t.jsx(K,{data:r.gasMetrics})]})]},"overview"),e==="whales"&&t.jsxs(R.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8,display:"flex",flexDirection:"column",gap:16},style:{willChange:"transform, opacity"},children:[t.jsxs("div",{style:{borderRadius:12,padding:16,background:"var(--zm-glass-bg)",border:"1px solid var(--zm-glass-border)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:16},children:[t.jsx(Se,{size:14,style:{color:"rgba(96,165,250,1)"}}),t.jsx("span",{style:{fontFamily:"monospace",fontSize:12,textTransform:"uppercase",letterSpacing:"0.1em",fontWeight:700,color:"var(--zm-text-primary)"},children:"Uniswap V3 — Whale Swaps  ($100k+)"}),t.jsx("span",{style:{marginLeft:"auto",fontFamily:"monospace",fontSize:10,padding:"2px 8px",borderRadius:4,background:"rgba(96,165,250,0.1)",color:"rgba(96,165,250,0.8)"},children:"The Graph"})]}),d.loading?t.jsx(j,{}):t.jsx("div",{children:d.whaleSwaps.length===0?t.jsx("p",{style:{fontFamily:"monospace",fontSize:12,paddingTop:16,paddingBottom:16,textAlign:"center",color:"var(--zm-text-faint)"},children:"No whale swaps found"}):d.whaleSwaps.slice(0,25).map(s=>t.jsx(me,{swap:s},s.id))})]}),t.jsxs("div",{style:{borderRadius:12,padding:16,background:"var(--zm-glass-bg)",border:"1px solid var(--zm-glass-border)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:16},children:[t.jsx(ze,{size:14,style:{color:"rgba(167,139,250,1)"}}),t.jsx("span",{style:{fontFamily:"monospace",fontSize:12,textTransform:"uppercase",letterSpacing:"0.1em",fontWeight:700,color:"var(--zm-text-primary)"},children:"Large On-Chain Transfers"}),t.jsx("span",{style:{marginLeft:"auto",fontFamily:"monospace",fontSize:10,padding:"2px 8px",borderRadius:4,background:"rgba(167,139,250,0.1)",color:"rgba(167,139,250,0.8)"},children:"Dune Analytics"})]}),r.loading?t.jsx(j,{}):t.jsx("div",{children:r.whaleMoves.length===0?t.jsx("p",{style:{fontFamily:"monospace",fontSize:12,paddingTop:16,paddingBottom:16,textAlign:"center",color:"var(--zm-text-faint)"},children:"No data available"}):r.whaleMoves.slice(0,20).map((s,h)=>{const g=se[s.action];return t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,paddingTop:8,paddingBottom:8,borderBottom:"1px solid rgba(148,163,184,0.06)"},children:[t.jsx("span",{style:{fontFamily:"monospace",fontSize:10,padding:"2px 6px",borderRadius:4,textTransform:"uppercase",background:"var(--zm-divider)",color:g,flexShrink:0},children:s.action}),t.jsxs("div",{style:{flex:1,minWidth:0},children:[t.jsx("div",{style:{fontFamily:"monospace",fontSize:12,color:"var(--zm-text-secondary)"},children:ie(s.wallet)}),t.jsxs("div",{style:{fontFamily:"monospace",fontSize:10,color:"var(--zm-text-faint)"},children:[s.asset,"  •  ",s.protocol]})]}),t.jsx("span",{style:{fontFamily:"monospace",fontWeight:700,fontSize:14,color:g},children:C(s.amountUsd)})]},s.wallet+h)})})]})]},"whales"),e==="dex"&&t.jsx(R.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8,willChange:"transform, opacity"},children:t.jsxs("div",{style:{borderRadius:12,padding:16,background:"var(--zm-glass-bg)",border:"1px solid var(--zm-glass-border)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:16},children:[t.jsx(te,{size:14,style:{color:"rgba(52,211,153,1)"}}),t.jsx("span",{style:{fontFamily:"monospace",fontSize:12,textTransform:"uppercase",letterSpacing:"0.1em",fontWeight:700,color:"var(--zm-text-primary)"},children:"Uniswap V3 — Top Pools by TVL"}),t.jsx("span",{style:{marginLeft:"auto",fontFamily:"monospace",fontSize:10,padding:"2px 8px",borderRadius:4,background:"rgba(52,211,153,0.1)",color:"rgba(52,211,153,0.8)"},children:"The Graph"})]}),t.jsx("div",{style:{display:"grid",gap:12,paddingTop:8,paddingBottom:8,marginBottom:4,gridTemplateColumns:"24px 1fr 90px 90px 70px 70px",borderBottom:"1px solid rgba(148,163,184,0.15)"},children:["#","Pair","TVL","Vol 24h","APR","Txns"].map(s=>t.jsx("span",{style:{fontFamily:"monospace",fontSize:10,textTransform:"uppercase",letterSpacing:"0.1em",textAlign:"right",color:"var(--zm-text-faint)"},children:s},s))}),d.loading?t.jsx(j,{}):d.pools.slice(0,30).map((s,h)=>t.jsx(pe,{pool:s,rank:h+1},s.id))]})},"dex"),e==="ohlcv"&&t.jsx(R.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8,display:"flex",flexDirection:"column",gap:16},style:{willChange:"transform, opacity"},children:t.jsxs("div",{style:{borderRadius:12,padding:16,background:"var(--zm-glass-bg)",border:"1px solid var(--zm-glass-border)"},children:[t.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:8,marginBottom:16},children:[t.jsx(ee,{size:14,style:{color:"rgba(96,165,250,1)"}}),t.jsx("span",{style:{fontFamily:"monospace",fontSize:12,textTransform:"uppercase",letterSpacing:"0.1em",fontWeight:700,color:"var(--zm-text-primary)"},children:"90-Day OHLCV  —  Daily Candles"}),t.jsx("span",{style:{fontFamily:"monospace",fontSize:10,padding:"2px 8px",borderRadius:4,background:"rgba(96,165,250,0.1)",color:"rgba(96,165,250,0.8)"},children:"CryptoCompare"})]}),t.jsx(ye,{active:n,onChange:p}),t.jsx("div",{style:{marginTop:16},children:f.loading?t.jsx(j,{}):t.jsx(ce,{candles:f.candles,symbol:n})}),!f.loading&&f.topPairs.length>0&&t.jsxs("div",{style:{marginTop:16},children:[t.jsxs("div",{style:{fontFamily:"monospace",fontSize:10,textTransform:"uppercase",letterSpacing:"0.1em",marginBottom:8,color:"var(--zm-text-faint)"},children:["Top Exchanges — ",n,"/USD"]}),t.jsx("div",{style:{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))"},children:f.topPairs.slice(0,8).map(s=>t.jsxs("div",{style:{padding:10,borderRadius:8,background:"rgba(148,163,184,0.05)",border:"1px solid rgba(148,163,184,0.08)"},children:[t.jsx("div",{style:{fontFamily:"monospace",fontSize:12,fontWeight:700,color:"var(--zm-text-primary)"},children:s.exchange}),t.jsxs("div",{style:{fontFamily:"monospace",fontSize:11,color:"var(--zm-text-faint)"},children:["Vol: ",C(s.volume24hUsd)]}),t.jsx("div",{style:{fontFamily:"monospace",fontSize:14,fontWeight:700,marginTop:2,color:"rgba(52,211,153,1)"},children:$(s.lastPrice)})]},s.exchange))})]})]})},"ohlcv"),e==="netflow"&&t.jsxs(R.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8,display:"flex",flexDirection:"column",gap:16},style:{willChange:"transform, opacity"},children:[t.jsxs("div",{style:{borderRadius:12,padding:16,background:"var(--zm-glass-bg)",border:"1px solid var(--zm-glass-border)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[t.jsx(Ce,{size:14,style:{color:"rgba(96,165,250,1)"}}),t.jsx("span",{style:{fontFamily:"monospace",fontSize:12,textTransform:"uppercase",letterSpacing:"0.1em",fontWeight:700,color:"var(--zm-text-primary)"},children:"Exchange Netflow"}),t.jsx("span",{style:{marginLeft:"auto",fontFamily:"monospace",fontSize:10,padding:"2px 8px",borderRadius:4,background:"rgba(167,139,250,0.1)",color:"rgba(167,139,250,0.8)"},children:"Dune Analytics"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:16,marginTop:8},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[t.jsx("div",{style:{width:12,height:12,borderRadius:4,background:"rgba(52,211,153,0.7)"}}),t.jsx("span",{style:{fontFamily:"monospace",fontSize:10,color:"var(--zm-text-faint)"},children:"Outflow (bullish)"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[t.jsx("div",{style:{width:12,height:12,borderRadius:4,background:"rgba(251,113,133,0.7)"}}),t.jsx("span",{style:{fontFamily:"monospace",fontSize:10,color:"var(--zm-text-faint)"},children:"Inflow (bearish)"})]})]}),r.loading?t.jsx(j,{}):r.netflows.length===0?t.jsx("p",{style:{fontFamily:"monospace",fontSize:12,paddingTop:16,paddingBottom:16,textAlign:"center",color:"var(--zm-text-faint)"},children:"No netflow data available"}):r.netflows.map((s,h)=>t.jsx(de,{item:s,maxAbs:U},s.exchange+h))]}),!r.loading&&r.gasMetrics.length>0&&t.jsxs("div",{style:{borderRadius:12,padding:16,background:"var(--zm-glass-bg)",border:"1px solid var(--zm-glass-border)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[t.jsx(O,{size:14,style:{color:"rgba(251,191,36,1)"}}),t.jsx("span",{style:{fontFamily:"monospace",fontSize:12,textTransform:"uppercase",letterSpacing:"0.1em",fontWeight:700,color:"var(--zm-text-primary)"},children:"Gas Price History"})]}),t.jsx(K,{data:r.gasMetrics})]})]},"netflow")]})]})});nt.displayName="OnChain";export{nt as default};
