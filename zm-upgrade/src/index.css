/* ═══════════════════════════════════════════════════════════════════════════
   ZERØ MERIDIAN — Design System v30 | Bloomberg-Grade
   ═══════════════════════════════════════════════════════════════════════════ */

@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@300;400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ── DESIGN TOKENS ─────────────────────────────────────────────────────────── */
@layer base {
  :root {
    /* Background layers */
    --zm-bg:              #080a10;
    --zm-bg-2:            #0b0d16;
    --zm-bg-3:            #0e1020;
    --zm-surface:         rgba(255,255,255,0.035);
    --zm-surface-hover:   rgba(255,255,255,0.055);
    --zm-surface-active:  rgba(79,127,255,0.08);

    /* Borders */
    --zm-border:          rgba(255,255,255,0.07);
    --zm-border-hover:    rgba(79,127,255,0.35);
    --zm-border-strong:   rgba(255,255,255,0.12);
    --zm-divider:         rgba(255,255,255,0.05);

    /* Sidebar */
    --zm-sidebar-bg:      #060810;
    --zm-sidebar-border:  rgba(255,255,255,0.05);

    /* Text */
    --zm-text-1:          rgba(228,232,244,1);
    --zm-text-2:          rgba(148,155,180,1);
    --zm-text-3:          rgba(78,84,110,1);
    --zm-text-4:          rgba(45,50,72,1);

    /* Accent — Bloomberg Blue */
    --zm-blue:            rgba(79,127,255,1);
    --zm-blue-dim:        rgba(79,127,255,0.55);
    --zm-blue-bg:         rgba(79,127,255,0.08);
    --zm-blue-border:     rgba(79,127,255,0.22);
    --zm-blue-glow:       0 0 20px rgba(79,127,255,0.3);

    /* Positive — Green */
    --zm-green:           rgba(52,211,153,1);
    --zm-green-dim:       rgba(52,211,153,0.55);
    --zm-green-bg:        rgba(52,211,153,0.08);
    --zm-green-border:    rgba(52,211,153,0.2);
    --zm-green-glow:      0 0 16px rgba(52,211,153,0.25);

    /* Negative — Red */
    --zm-red:             rgba(251,113,133,1);
    --zm-red-dim:         rgba(251,113,133,0.55);
    --zm-red-bg:          rgba(251,113,133,0.08);
    --zm-red-border:      rgba(251,113,133,0.2);
    --zm-red-glow:        0 0 16px rgba(251,113,133,0.25);

    /* Warning — Amber */
    --zm-amber:           rgba(251,191,36,1);
    --zm-amber-bg:        rgba(251,191,36,0.08);
    --zm-amber-border:    rgba(251,191,36,0.2);

    /* Violet */
    --zm-violet:          rgba(167,139,250,1);
    --zm-violet-bg:       rgba(167,139,250,0.08);
    --zm-violet-border:   rgba(167,139,250,0.2);

    /* Cyan */
    --zm-cyan:            rgba(34,211,238,1);
    --zm-cyan-bg:         rgba(34,211,238,0.07);
    --zm-cyan-border:     rgba(34,211,238,0.18);

    /* Card */
    --zm-card-bg:         rgba(255,255,255,0.03);
    --zm-card-border:     rgba(255,255,255,0.07);
    --zm-card-radius:     10px;
    --zm-card-radius-lg:  14px;

    /* Typography scale */
    --zm-font-data:       'JetBrains Mono', monospace;
    --zm-font-ui:         'Space Grotesk', sans-serif;

    --zm-text-2xs:  10px;
    --zm-text-xs:   11px;
    --zm-text-sm:   12px;
    --zm-text-base: 13px;
    --zm-text-md:   14px;
    --zm-text-lg:   16px;
    --zm-text-xl:   20px;
    --zm-text-2xl:  24px;
    --zm-text-3xl:  30px;

    /* Spacing scale (4px base) */
    --zm-space-1:  4px;
    --zm-space-2:  8px;
    --zm-space-3:  12px;
    --zm-space-4:  16px;
    --zm-space-5:  20px;
    --zm-space-6:  24px;
    --zm-space-8:  32px;
    --zm-space-10: 40px;
    --zm-space-12: 48px;

    /* Motion */
    --zm-ease-out:    cubic-bezier(0.16, 1, 0.3, 1);
    --zm-ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
    --zm-ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
    --zm-dur-fast:    120ms;
    --zm-dur-normal:  220ms;
    --zm-dur-slow:    380ms;

    /* Layout */
    --zm-stats-h:   28px;
    --zm-topbar-h:  52px;
    --zm-header-h:  80px;
    --zm-sidebar-w: 240px;
    --zm-sidebar-c: 64px;
    --zm-bottom-nav-h: 60px;

    /* Shadcn compat */
    --background:   240 47% 2%;
    --foreground:   240 12% 95%;
    --card:         240 20% 6%;
    --card-foreground: 240 12% 95%;
    --popover:      240 20% 6%;
    --popover-foreground: 240 12% 95%;
    --primary:      220 100% 65%;
    --primary-foreground: 240 47% 2%;
    --secondary:    240 15% 10%;
    --secondary-foreground: 240 12% 95%;
    --muted:        240 15% 10%;
    --muted-foreground: 240 8% 55%;
    --accent:       220 100% 65%;
    --accent-foreground: 240 47% 2%;
    --destructive:  0 85% 65%;
    --destructive-foreground: 0 0% 100%;
    --border:       240 15% 10%;
    --input:        240 15% 10%;
    --ring:         220 100% 65%;
    --radius:       0.625rem;
    --sidebar-background: 240 47% 2%;
    --sidebar-foreground: 240 12% 95%;
    --sidebar-primary: 220 100% 65%;
    --sidebar-primary-foreground: 240 47% 2%;
    --sidebar-accent: 240 15% 10%;
    --sidebar-accent-foreground: 240 12% 95%;
    --sidebar-border: 240 15% 10%;
    --sidebar-ring: 220 100% 65%;
  }

  .light {
    --zm-bg:             #f4f5f9;
    --zm-bg-2:           #eef0f6;
    --zm-bg-3:           #e8eaf2;
    --zm-surface:        rgba(0,0,0,0.03);
    --zm-surface-hover:  rgba(0,0,0,0.05);
    --zm-surface-active: rgba(79,127,255,0.07);
    --zm-border:         rgba(0,0,0,0.08);
    --zm-border-hover:   rgba(79,127,255,0.4);
    --zm-border-strong:  rgba(0,0,0,0.14);
    --zm-divider:        rgba(0,0,0,0.06);
    --zm-sidebar-bg:     #ffffff;
    --zm-sidebar-border: rgba(0,0,0,0.07);
    --zm-text-1:         rgba(12,14,22,0.92);
    --zm-text-2:         rgba(60,65,88,0.78);
    --zm-text-3:         rgba(100,108,138,0.65);
    --zm-text-4:         rgba(150,158,185,0.5);
    --zm-blue:           rgba(59,112,245,1);
    --zm-blue-dim:       rgba(59,112,245,0.6);
    --zm-blue-bg:        rgba(59,112,245,0.08);
    --zm-blue-border:    rgba(59,112,245,0.22);
    --zm-green:          rgba(16,185,129,1);
    --zm-green-dim:      rgba(16,185,129,0.6);
    --zm-green-bg:       rgba(16,185,129,0.08);
    --zm-green-border:   rgba(16,185,129,0.2);
    --zm-red:            rgba(239,68,88,1);
    --zm-red-dim:        rgba(239,68,88,0.6);
    --zm-red-bg:         rgba(239,68,88,0.08);
    --zm-red-border:     rgba(239,68,88,0.2);
    --zm-amber:          rgba(217,119,6,1);
    --zm-amber-bg:       rgba(217,119,6,0.08);
    --zm-amber-border:   rgba(217,119,6,0.2);
    --zm-card-bg:        rgba(255,255,255,1);
    --zm-card-border:    rgba(0,0,0,0.08);
    --background: 220 20% 97%;
    --foreground: 240 30% 8%;
    --card: 0 0% 100%;
    --card-foreground: 240 30% 8%;
    --border: 220 15% 88%;
    --input: 220 15% 88%;
  }
}

/* ── BASE RESET ─────────────────────────────────────────────────────────────── */
@layer base {
  * { @apply border-border; box-sizing: border-box; }

  html {
    font-size: 14px;
    -webkit-text-size-adjust: 100%;
    transition: background-color 0.3s ease;
  }

  body {
    background: var(--zm-bg);
    background-image:
      radial-gradient(ellipse 80% 40% at 20% -10%, rgba(79,127,255,0.10) 0%, transparent 55%),
      radial-gradient(ellipse 60% 30% at 80% 110%, rgba(52,211,153,0.06) 0%, transparent 50%);
    background-attachment: fixed;
    color: var(--zm-text-1);
    font-family: var(--zm-font-ui);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    min-height: 100vh;
    overflow-x: hidden;
  }
}

/* ── SCROLLBAR ──────────────────────────────────────────────────────────────── */
::-webkit-scrollbar { width: 3px; height: 3px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(79,127,255,0.2); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: rgba(79,127,255,0.4); }

/* ── UTILITY CLASSES ────────────────────────────────────────────────────────── */

/* Card */
.zm-card {
  background: var(--zm-card-bg);
  border: 1px solid var(--zm-card-border);
  border-radius: var(--zm-card-radius);
  transition:
    border-color var(--zm-dur-fast) var(--zm-ease-out),
    box-shadow   var(--zm-dur-fast) var(--zm-ease-out);
}
.zm-card:hover {
  border-color: var(--zm-border-hover);
  box-shadow: 0 4px 24px rgba(0,0,0,0.3), 0 0 0 1px rgba(79,127,255,0.1);
}
.zm-card-lg {
  border-radius: var(--zm-card-radius-lg);
}

/* Glass */
.zm-glass {
  background: var(--zm-surface);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--zm-border);
  border-radius: var(--zm-card-radius);
}

/* Section label */
.zm-section-label {
  display: flex;
  align-items: center;
  gap: var(--zm-space-2);
  margin-bottom: var(--zm-space-4);
  margin-top: var(--zm-space-8);
  font-family: var(--zm-font-data);
  font-size: var(--zm-text-2xs);
  color: var(--zm-text-3);
  letter-spacing: 0.14em;
  text-transform: uppercase;
}
.zm-section-label::after {
  content: '';
  flex: 1;
  height: 1px;
  background: linear-gradient(to right, var(--zm-border), transparent);
}

/* Live badge */
.zm-live {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  font-family: var(--zm-font-data);
  font-size: var(--zm-text-2xs);
  font-weight: 700;
  letter-spacing: 0.08em;
  padding: 2px 8px;
  border-radius: 5px;
  background: var(--zm-green-bg);
  border: 1px solid var(--zm-green-border);
  color: var(--zm-green);
}
.zm-live-dot {
  width: 5px;
  height: 5px;
  border-radius: 50%;
  background: var(--zm-green);
  box-shadow: 0 0 6px var(--zm-green);
  animation: zm-pulse 2s ease-in-out infinite;
}

/* Typography helpers */
.zm-mono     { font-family: var(--zm-font-data); }
.zm-ui       { font-family: var(--zm-font-ui); }
.zm-label    { font-family: var(--zm-font-data); font-size: var(--zm-text-2xs); color: var(--zm-text-3); letter-spacing: 0.1em; text-transform: uppercase; }
.zm-value    { font-family: var(--zm-font-data); font-size: var(--zm-text-lg); font-weight: 700; color: var(--zm-text-1); }
.zm-positive { color: var(--zm-green); }
.zm-negative { color: var(--zm-red); }
.zm-neutral  { color: var(--zm-text-2); }
.zm-accent   { color: var(--zm-blue); }

/* Price flash animations */
.zm-flash-up   { animation: zm-flash-up 500ms ease-out; }
.zm-flash-down { animation: zm-flash-down 500ms ease-out; }

/* Focus */
:focus-visible {
  outline: 2px solid var(--zm-blue);
  outline-offset: 2px;
  border-radius: 4px;
}

/* Touch targets */
button, a, [role="button"] { touch-action: manipulation; }

/* Corners decoration */
.zm-corners { position: relative; }
.zm-corners::before,
.zm-corners::after {
  content: '';
  position: absolute;
  width: 8px;
  height: 8px;
  pointer-events: none;
  z-index: 1;
}
.zm-corners::before {
  top: -1px; left: -1px;
  border-top: 1.5px solid rgba(79,127,255,0.25);
  border-left: 1.5px solid rgba(79,127,255,0.25);
  border-radius: var(--zm-card-radius) 0 0 0;
}
.zm-corners::after {
  top: -1px; right: -1px;
  border-top: 1.5px solid rgba(79,127,255,0.25);
  border-right: 1.5px solid rgba(79,127,255,0.25);
  border-radius: 0 var(--zm-card-radius) 0 0;
}

/* Gradient text */
.zm-gradient-text {
  background: linear-gradient(135deg, var(--zm-blue) 0%, var(--zm-cyan) 50%, var(--zm-green) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Mobile page content */
@media (max-width: 767px) {
  .zm-page {
    padding-left: var(--zm-space-4) !important;
    padding-right: var(--zm-space-4) !important;
    padding-bottom: 80px !important;
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Print */
@media print {
  aside, header, nav { display: none; }
  main { margin: 0 !important; }
}

/* ── KEYFRAMES ──────────────────────────────────────────────────────────────── */
@keyframes zm-pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50%       { opacity: 0.5; transform: scale(0.85); }
}

@keyframes zm-flash-up {
  0%   { background-color: transparent; }
  25%  { background-color: rgba(52,211,153,0.18); }
  100% { background-color: transparent; }
}

@keyframes zm-flash-down {
  0%   { background-color: transparent; }
  25%  { background-color: rgba(251,113,133,0.18); }
  100% { background-color: transparent; }
}

@keyframes zm-number-up {
  0%   { transform: translateY(6px); opacity: 0; }
  100% { transform: translateY(0); opacity: 1; }
}

@keyframes zm-number-down {
  0%   { transform: translateY(-6px); opacity: 0; }
  100% { transform: translateY(0); opacity: 1; }
}

@keyframes zm-shimmer {
  0%   { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes zm-spin {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
}

@keyframes zm-fade-in {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes zm-ticker {
  0%   { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

@keyframes zm-scan {
  0%   { transform: translateY(-100%); }
  100% { transform: translateY(2000%); }
}

/* Skeleton shimmer */
.zm-skeleton {
  background: linear-gradient(
    90deg,
    var(--zm-surface) 25%,
    rgba(255,255,255,0.07) 50%,
    var(--zm-surface) 75%
  );
  background-size: 200% 100%;
  animation: zm-shimmer 1.6s ease-in-out infinite;
  border-radius: 4px;
}

/* Table rows */
tr:hover td { background: rgba(79,127,255,0.03) !important; }

/* Input */
input, textarea, select {
  background: rgba(255,255,255,0.04);
  border-color: var(--zm-border);
  color: var(--zm-text-1);
}
input:focus, textarea:focus, select:focus {
  border-color: var(--zm-blue) !important;
  box-shadow: 0 0 0 3px var(--zm-blue-bg) !important;
  outline: none;
}
